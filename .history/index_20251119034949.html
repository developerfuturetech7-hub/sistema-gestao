<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Gest√£o">
    <title>Sistema de Gest√£o Financeira e Or√ßamentos</title>
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <link rel="stylesheet" href="styles.css">
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#2c3e50">
    <link rel="apple-touch-icon" href="icon-192.png">
</head>
<body>
    <div class="container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="logo-section">
                <img id="logoPreview" src="" alt="Logo" class="logo-img" style="display: none;">
                <h2 id="empresaNome">Minha Empresa</h2>
                <p id="empresaCnpj" class="cnpj"></p>
            </div>
            <nav class="menu">
                <button class="menu-item active" data-page="dashboard">
                    <span class="icon">üìä</span> Dashboard
                </button>
                <button class="menu-item" data-page="financeiro">
                    <span class="icon">üí∞</span> Financeiro
                </button>
                <button class="menu-item" data-page="orcamentos">
                    <span class="icon">üìã</span> Or√ßamentos
                </button>
                <button class="menu-item" data-page="clientes">
                    <span class="icon">üë•</span> Clientes
                </button>
                <button class="menu-item" data-page="produtos">
                    <span class="icon">üì¶</span> Produtos
                </button>
                <button class="menu-item" data-page="configuracoes">
                    <span class="icon">‚öôÔ∏è</span> Configura√ß√µes
                </button>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Dashboard Page -->
            <div id="dashboard-page" class="page active">
                <h1>Dashboard Financeiro</h1>
                
                <div class="cards-grid">
                    <div class="card card-info">
                        <h3>Saldo Inicial da Conta</h3>
                        <p class="card-value" id="saldoInicial">R$ 0,00</p>
                        <small>Saldo inicial configurado</small>
                    </div>
                    <div class="card card-success">
                        <h3>Entradas Confirmadas</h3>
                        <p class="card-value" id="entradasConfirmadas">R$ 0,00</p>
                        <small>PIX + A receber confirmados</small>
                    </div>
                    <div class="card card-danger">
                        <h3>Sa√≠das Confirmadas</h3>
                        <p class="card-value" id="saidasConfirmadas">R$ 0,00</p>
                        <small>Devo + D√©bito + Cr√©dito confirmados</small>
                    </div>
                    <div class="card card-primary">
                        <h3>Saldo Atual da Conta</h3>
                        <p class="card-value" id="saldoAtualConta">R$ 0,00</p>
                        <small>Inicial + Entradas - Sa√≠das</small>
                    </div>
                    <div class="card card-warning">
                        <h3>D√≠vidas Pendentes (Devo)</h3>
                        <p class="card-value" id="devidoPendente">R$ 0,00</p>
                        <small>Contas a pagar pendentes</small>
                    </div>
                    <div class="card card-info">
                        <h3>A Receber Pendente</h3>
                        <p class="card-value" id="receberPendente">R$ 0,00</p>
                        <small>Valores a receber pendentes</small>
                    </div>
                    <div class="card card-success" style="grid-column: span 2;">
                        <h3>üéØ Saldo Projetado Final</h3>
                        <p class="card-value" id="saldoProjetado" style="font-size: 2.5em;">R$ 0,00</p>
                        <small>Saldo se receber tudo e pagar tudo</small>
                    </div>
                    <div class="card card-alert">
                        <h3>Saldo Atrasado</h3>
                        <p class="card-value" id="saldoAtrasado">R$ 0,00</p>
                        <small>Vencidos</small>
                    </div>
                    <div class="card card-primary">
                        <h3>Or√ßamentos</h3>
                        <p class="card-value" id="totalOrcamentos">0</p>
                        <small>Total cadastrados</small>
                    </div>
                </div>

                <div class="dashboard-charts">
                    <div class="card">
                        <h3>√öltimos Lan√ßamentos</h3>
                        <div id="ultimosLancamentos" class="lancamentos-list"></div>
                    </div>
                    <div class="card">
                        <h3>Or√ßamentos Pendentes</h3>
                        <div id="orcamentosPendentes" class="orcamentos-list"></div>
                    </div>
                </div>
            </div>

            <!-- Financeiro Page -->
            <div id="financeiro-page" class="page">
                <div class="page-header">
                    <h1>Controle Financeiro</h1>
                    <button class="btn btn-primary" id="btnNovoLancamento">+ Novo Lan√ßamento</button>
                </div>

                <div class="saldo-section">
                    <label>Saldo Inicial da Conta:</label>
                    <input type="number" id="saldoInicial" step="0.01" placeholder="0,00">
                </div>

                <div class="table-container">
                    <table id="tabelaFinanceiro">
                        <thead>
                            <tr>
                                <th>Data</th>
                                <th>Descri√ß√£o</th>
                                <th>Categoria</th>
                                <th>Valor</th>
                                <th>Vencimento</th>
                                <th>Status</th>
                                <th>A√ß√µes</th>
                            </tr>
                        </thead>
                        <tbody id="listaLancamentos"></tbody>
                    </table>
                </div>
            </div>

            <!-- Or√ßamentos Page -->
            <div id="orcamentos-page" class="page">
                <div class="page-header">
                    <h1>Or√ßamentos</h1>
                    <button class="btn btn-primary" id="btnNovoOrcamento">+ Novo Or√ßamento</button>
                </div>

                <div class="table-container">
                    <table id="tabelaOrcamentos">
                        <thead>
                            <tr>
                                <th>N¬∫</th>
                                <th>Data</th>
                                <th>Cliente</th>
                                <th>Valor Total</th>
                                <th>Status</th>
                                <th>A√ß√µes</th>
                            </tr>
                        </thead>
                        <tbody id="listaOrcamentos"></tbody>
                    </table>
                </div>
            </div>

            <!-- Clientes Page -->
            <div id="clientes-page" class="page">
                <div class="page-header">
                    <h1>Clientes</h1>
                    <button class="btn btn-primary" id="btnNovoCliente">+ Novo Cliente</button>
                </div>

                <div class="table-container">
                    <table id="tabelaClientes">
                        <thead>
                            <tr>
                                <th>Nome</th>
                                <th>CPF/CNPJ</th>
                                <th>Telefone</th>
                                <th>Email</th>
                                <th>A√ß√µes</th>
                            </tr>
                        </thead>
                        <tbody id="listaClientes"></tbody>
                    </table>
                </div>
            </div>

            <!-- Produtos Page -->
            <div id="produtos-page" class="page">
                <div class="page-header">
                    <h1>Produtos/Servi√ßos</h1>
                    <button class="btn btn-primary" id="btnNovoProduto">+ Novo Produto</button>
                </div>

                <div class="table-container">
                    <table id="tabelaProdutos">
                        <thead>
                            <tr>
                                <th>C√≥digo</th>
                                <th>Descri√ß√£o</th>
                                <th>Pre√ßo Custo</th>
                                <th>Pre√ßo Venda</th>
                                <th>Margem</th>
                                <th>A√ß√µes</th>
                            </tr>
                        </thead>
                        <tbody id="listaProdutos"></tbody>
                    </table>
                </div>
            </div>

            <!-- Configura√ß√µes Page -->
            <div id="configuracoes-page" class="page">
                <h1>Configura√ß√µes</h1>
                
                <div class="config-section">
                    <h3>Dados da Empresa</h3>
                    <div class="form-group">
                        <label>Nome da Empresa:</label>
                        <input type="text" id="configNome" placeholder="Minha Empresa">
                    </div>
                    <div class="form-group">
                        <label>CNPJ:</label>
                        <input type="text" id="configCnpj" placeholder="00.000.000/0000-00">
                    </div>
                    <div class="form-group">
                        <label>Telefone:</label>
                        <input type="text" id="configTelefone" placeholder="(00) 00000-0000">
                    </div>
                    <div class="form-group">
                        <label>Email:</label>
                        <input type="email" id="configEmail" placeholder="contato@empresa.com">
                    </div>
                    <div class="form-group">
                        <label>Endere√ßo:</label>
                        <textarea id="configEndereco" placeholder="Rua, n√∫mero, bairro, cidade - UF"></textarea>
                    </div>
                    <div class="form-group">
                        <label>Logo da Empresa:</label>
                        <input type="file" id="configLogo" accept="image/*">
                        <img id="configLogoPreview" src="" alt="" style="display: none; max-width: 200px; margin-top: 10px;">
                    </div>
                    <button class="btn btn-success" id="btnSalvarConfig">Salvar Configura√ß√µes</button>
                </div>

                <div class="config-section">
                    <h3>Backup e Dados</h3>
                    <button class="btn btn-info" id="btnExportarDados">üíæ Exportar Dados (JSON)</button>
                    <button class="btn btn-success" id="btnCompartilharDados">üì§ Compartilhar Backup</button>
                    <button class="btn btn-warning" id="btnImportarDados">üì• Importar Dados</button>
                    <button class="btn btn-primary" id="btnImportarExcel">üìä Importar do Excel</button>
                    <button class="btn btn-success" id="btnExportarFinanceiro">üìä Exportar Financeiro (CSV)</button>
                    <button class="btn btn-primary" id="btnCarregarPlanilha">üìã Carregar Planilha Existente</button>
                    <input type="file" id="inputImportarDados" accept=".json" style="display: none;">
                    <input type="file" id="inputImportarExcel" accept=".xlsx,.xls,.csv" style="display: none;">
                    <div style="margin-top: 15px; padding: 15px; background-color: #e8f4f8; border-radius: 6px;">
                        <small>
                            <strong>üí° Dica:</strong> Use "Compartilhar Backup" para enviar seus dados via WhatsApp, email, etc. 
                            Depois importe no outro dispositivo para sincronizar!<br><br>
                            <strong>üìä Importar Excel:</strong> Fa√ßa upload da sua planilha de controle financeiro (.xlsx ou .csv)
                        </small>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Modal Lan√ßamento -->
    <div id="modalLancamento" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Novo Lan√ßamento</h2>
                <span class="close">&times;</span>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>Data:</label>
                    <input type="date" id="lancamentoData">
                </div>
                <div class="form-group">
                    <label>Descri√ß√£o:</label>
                    <input type="text" id="lancamentoDescricao" placeholder="Descri√ß√£o do lan√ßamento">
                </div>
                <div class="form-group">
                    <label>Categoria:</label>
                    <select id="lancamentoCategoria">
                        <optgroup label="üí∏ Contas a Pagar">
                            <option value="Devo">Devo (Contas a pagar)</option>
                        </optgroup>
                        <optgroup label="üí∞ Valores a Receber">
                            <option value="A receber">A receber</option>
                        </optgroup>
                        <optgroup label="üí≥ Formas de Pagamento">
                            <option value="D√©bito">D√©bito (Sa√≠da)</option>
                            <option value="Cr√©dito">Cr√©dito (Sa√≠da)</option>
                            <option value="Pix">Pix (Entrada/Sa√≠da)</option>
                        </optgroup>
                    </select>
                </div>
                <div class="form-group">
                    <label>Valor:</label>
                    <input type="number" id="lancamentoValor" step="0.01" placeholder="0,00">
                </div>
                <div class="form-group">
                    <label>Vencimento:</label>
                    <input type="date" id="lancamentoVencimento">
                </div>
                <div class="form-group">
                    <label>Status:</label>
                    <select id="lancamentoStatus">
                        <option value="Pendente">Pendente</option>
                        <option value="Confirmado">Confirmado</option>
                    </select>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="btnCancelarLancamento">Cancelar</button>
                <button class="btn btn-primary" id="btnSalvarLancamento">Salvar</button>
            </div>
        </div>
    </div>

    <!-- Modal Cliente -->
    <div id="modalCliente" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Novo Cliente</h2>
                <span class="close">&times;</span>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>Nome:</label>
                    <input type="text" id="clienteNome" placeholder="Nome completo">
                </div>
                <div class="form-group">
                    <label>CPF/CNPJ:</label>
                    <input type="text" id="clienteDoc" placeholder="000.000.000-00">
                </div>
                <div class="form-group">
                    <label>Telefone:</label>
                    <input type="text" id="clienteTelefone" placeholder="(00) 00000-0000">
                </div>
                <div class="form-group">
                    <label>Email:</label>
                    <input type="email" id="clienteEmail" placeholder="cliente@email.com">
                </div>
                <div class="form-group">
                    <label>Endere√ßo:</label>
                    <textarea id="clienteEndereco" placeholder="Endere√ßo completo"></textarea>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="btnCancelarCliente">Cancelar</button>
                <button class="btn btn-primary" id="btnSalvarCliente">Salvar</button>
            </div>
        </div>
    </div>

    <!-- Modal Produto -->
    <div id="modalProduto" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Novo Produto</h2>
                <span class="close">&times;</span>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>C√≥digo:</label>
                    <input type="text" id="produtoCodigo" placeholder="C√≥digo do produto">
                </div>
                <div class="form-group">
                    <label>Descri√ß√£o:</label>
                    <input type="text" id="produtoDescricao" placeholder="Descri√ß√£o do produto/servi√ßo">
                </div>
                <div class="form-group">
                    <label>Pre√ßo de Custo:</label>
                    <input type="number" id="produtoCusto" step="0.01" placeholder="0,00">
                </div>
                <div class="form-group">
                    <label>Pre√ßo de Venda:</label>
                    <input type="number" id="produtoVenda" step="0.01" placeholder="0,00">
                </div>
                <div class="form-group">
                    <label>Unidade:</label>
                    <input type="text" id="produtoUnidade" placeholder="UN, KG, M¬≤, etc">
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="btnCancelarProduto">Cancelar</button>
                <button class="btn btn-primary" id="btnSalvarProduto">Salvar</button>
            </div>
        </div>
    </div>

    <!-- Modal Or√ßamento -->
    <div id="modalOrcamento" class="modal">
        <div class="modal-content modal-large">
            <div class="modal-header">
                <h2>Novo Or√ßamento</h2>
                <span class="close">&times;</span>
            </div>
            <div class="modal-body">
                <div class="form-row">
                    <div class="form-group">
                        <label>Data:</label>
                        <input type="date" id="orcamentoData">
                    </div>
                    <div class="form-group">
                        <label>Cliente:</label>
                        <select id="orcamentoCliente">
                            <option value="">Selecione um cliente</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label>Observa√ß√µes:</label>
                    <textarea id="orcamentoObs" placeholder="Observa√ß√µes do or√ßamento"></textarea>
                </div>
                
                <h3>Itens do Or√ßamento</h3>
                <div class="orcamento-itens">
                    <div class="form-row">
                        <select id="itemProduto" class="flex-2">
                            <option value="">Selecione um produto</option>
                        </select>
                        <input type="number" id="itemQuantidade" placeholder="Qtd" step="0.01" class="flex-1">
                        <input type="number" id="itemPreco" placeholder="Pre√ßo" step="0.01" class="flex-1">
                        <button class="btn btn-small btn-success" id="btnAdicionarItem">+</button>
                    </div>
                    <table id="tabelaItensOrcamento">
                        <thead>
                            <tr>
                                <th>Produto</th>
                                <th>Quantidade</th>
                                <th>Pre√ßo Unit.</th>
                                <th>Total</th>
                                <th>A√ß√£o</th>
                            </tr>
                        </thead>
                        <tbody id="listaItensOrcamento"></tbody>
                    </table>
                    <div class="orcamento-total">
                        <strong>Total do Or√ßamento: R$ <span id="orcamentoTotal">0,00</span></strong>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="btnCancelarOrcamento">Cancelar</button>
                <button class="btn btn-primary" id="btnSalvarOrcamento">Salvar Or√ßamento</button>
            </div>
        </div>
    </div>

    <!-- Modal Visualizar Or√ßamento -->
    <div id="modalVisualizarOrcamento" class="modal">
        <div class="modal-content modal-large">
            <div class="modal-header">
                <h2>Or√ßamento #<span id="viewOrcNumero"></span></h2>
                <span class="close">&times;</span>
            </div>
            <div class="modal-body">
                <div id="orcamentoImpressao" class="orcamento-impressao">
                    <!-- Conte√∫do ser√° gerado dinamicamente -->
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-info" id="btnImprimirOrcamento">Imprimir</button>
                <button class="btn btn-success" id="btnAprovarOrcamento">Aprovar e Lan√ßar no Financeiro</button>
                <button class="btn btn-danger" id="btnExcluirOrcamento">Excluir</button>
                <button class="btn btn-secondary" id="btnFecharVisualizacao">Fechar</button>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>
